<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>PHPEMS模拟考试系统</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.75, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="files/public/css/bootstrap.css" />
	<link rel="stylesheet/less" type="text/css" href="files/public/css/pe.less" />
	<link rel="stylesheet" href="files/public/css/swiper.min.css">
	<script src="files/public/js/less.min.js"></script>
	<script src="files/public/js/jquery.min.js"></script>
	<script src="files/public/js/swiper.min.js"></script>
	<script src="files/public/js/bootstrap.min.js"></script>
	<script src="files/public/js/bootstrap-datetimepicker.js"></script>
	<script src="files/public/js/all.fine-uploader.min.js"></script>
	<script src="files/public/js/ckeditor/ckeditor.js"></script>
	<script src="files/public/js/pe.app.js"></script>
</head><body>
<div class="container-fluid" style="height: 100vh;background:radial-gradient(circle at 50% 30%, #4f4f7a, #000);">
	<div class="row-fluid">
		<div class="pages">
			<div class="content" style="margin-top: 10vh;">
				<div class="col-xs-3 padding"></div>
				<div class="col-xs-6 nopadding">
					<div class="content-box padding">
						<h2 class="title">
							用户登陆
							<a href="index.php" class="badge pull-right">首页</a>
						</h2>
						<form method="post" action="index.php?user-app-register">
							<fieldset class="logbox">
								<div class="form-group underline">
									<div class="col-xs-4 tip">
										用户名
									</div>
									<div class="col-xs-8">
										<input class="form-control noborder" name="args[username]" datatype="userName" needle="needle" msg="请您输入正确的用户名" placeholder="请输入用户名">
									</div>
								</div>
								<div class="form-group underline">
									<label class="block">
										<div class="col-xs-4 tip">
											邮箱
										</div>
										<div class="col-xs-8">
											<input class="noborder" name="args[useremail]" id="email" datatype="email" needle="needle" msg="请你输入邮箱" placeholder="请输入邮箱">
										</div>
									</label>
								</div>
								<div class="form-group underline">
									<label class="block">
										<div class="col-xs-4 tip">
											密码
										</div>
										<div class="col-xs-8">
											<input class="noborder" name="args[userpassword]" datatype="password" type="password" needle="needle" msg="请您输入正确的密码" placeholder="请输入密码">
										</div>
									</label>
								</div>
                                								<div class="form-group underline">
									<label class="block">
										<div class="col-xs-4 tip">
											验证码
										</div>
										<div class="col-xs-6">
											<input class="noborder" name="randcode" needle="needle" msg="请您输入正确的验证码" placeholder="请输入验证码">
										</div>
										<div class="col-xs-2">
											<button type="button" class="btn btn-danger pull-right" id="sendphonecode">发送验证码</button>
										</div>
									</label>
								</div>
                                                                								<div class="form-group underline">
									<div class="col-xs-4 tip">
                                        头像									</div>
									<div class="col-xs-8">
                                            	<script type="text/template" id="pe-template-userphoto">
    		<div class="qq-uploader-selector" qq-drop-area-text="可将图片拖拽至此处上传" style="clear:both;max-width:270px;">
            	<div class="qq-upload-button-selector" style="clear:both;">
                	<ul class="qq-upload-list-selector list-unstyled" aria-live="polite" aria-relevant="additions removals" style="clear:both;">
		                <li class="text-center">
		                    <div class="thumbnail">
								<img class="qq-thumbnail-selector" alt="点击上传新图片">
								<input type="hidden" class="qq-edit-filename-selector" name="args[userphoto]" tabindex="0">
							</div>
		                </li>
		            </ul>
		            <ul class="qq-upload-list-selector list-unstyled" aria-live="polite" aria-relevant="additions removals" style="clear:both;">
			            <li class="text-center">
			                <div class="thumbnail">
								<img class="qq-thumbnail-selector" src="app/core/styles/img/noimage.gif" alt="点击上传新图片">
								<input type="hidden" class="qq-edit-filename-selector" name="args[userphoto]" tabindex="0" value="app/core/styles/img/noimage.gif">
                			</div>
			            </li>
			        </ul>
                </div>
            </div>
        </script>
        <div class="fineuploader" attr-type="thumb" attr-template="pe-template-userphoto"></div>									</div>
								</div>
                                								<div class="form-group underline">
									<div class="col-xs-4 tip">
                                        真实姓名									</div>
									<div class="col-xs-8">
                                        <input type="text" class="form-control noborder" placeholder="请输入真实姓名" name="args[usertruename]" id="usertruename" />									</div>
								</div>
                                								<div class="form-group">
									<div class="col-xs-12 text-center">
										<label class="inline"><input type="radio" name="sex"><span class="selector">同意《注册协议》</span></label>
									</div>
								</div>
								<div class="form-group text-center">
                                    									<button class="btn btn-primary login">注册</button>
                                    									<a href="index.php?user-app-login" class="btn btn-default login">登陆</a>
									<input type="hidden" value="1" name="userregister"/>
								</div>
							</fieldset>
						</form>
					</div>
				</div>
				<div class="col-xs-3 padding"></div>
			</div>
		</div>
	</div>
</div>
<script>
    var sendstatus = true;
    $('#sendphonecode').click(function(){
        var _this = $(this);
        if(sendstatus)
        {
            $.getJSON('index.php?core-api-index-sendmail&action=reg&email='+$('#email').val()+'&userhash='+Math.random(),function(data){
                if(parseInt(data.statusCode) == 200)
                {
                    _this.html('120秒重发');
                    sendstatus = false;
                    sendtime = 120;
                    sendevent = setInterval(function(){
                        if(sendtime > 0)
                        {
                            sendtime--;
                            _this.html(sendtime+'秒重发');
                        }
                        else
                        {
                            sendstatus = true;
                            _this.html('发送验证码');
                            clearInterval(sendevent);
                        }
                    },1000);
                }
                else
                {
                    $.zoombox.show('ajax',data);
                }
            });
        }
    });
</script>
</body>
</html>